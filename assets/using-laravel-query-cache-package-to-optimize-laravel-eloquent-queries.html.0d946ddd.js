import{_ as c,r as i,o as r,c as o,b as e,a as s,F as p,d as a,e as t}from"./app.c6a97e59.js";const u={},d=e("h1",{id:"\u4F7F\u7528-laravel-query-cache-\u6765\u7F13\u5B58\u6570\u636E\u5E93\u7684-select-\u8BF7\u6C42",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u4F7F\u7528-laravel-query-cache-\u6765\u7F13\u5B58\u6570\u636E\u5E93\u7684-select-\u8BF7\u6C42","aria-hidden":"true"},"#"),a(" \u4F7F\u7528 laravel-query-cache \u6765\u7F13\u5B58\u6570\u636E\u5E93\u7684 SELECT \u8BF7\u6C42")],-1),h=e("p",null,"\u5728\u5B9E\u9645\u7684\u5F00\u53D1\u4E2D\uFF0C\u7ECF\u5E38\u9700\u8981\u7F13\u5B58\u67E5\u8BE2\u6570\u636E\u5E93\u7684\u7ED3\u679C\u4EE5\u63D0\u5347\u8F6F\u4EF6\u7684\u6027\u80FD\u3002",-1),v=a("\u8FD9\u91CC\u4F7F\u7528"),k={href:"https://github.com/Neurony/laravel-query-cache",target:"_blank",rel:"noopener noreferrer"},m=a("Neurony/laravel-query-cache"),g=a("\u6765\u5B9E\u73B0\u7F13\u5B58\uFF0C\u6B63\u5982\u62D3\u5C55\u5305 README \u4E2D\u8BF4\u5230\u7684\uFF0C\u5B83\u4E13\u6CE8\u4E8E\u5141\u8BB8\u6240\u6709\u7684\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u6216\u8005\u662F\u5728\u4E00\u6B21\u8BF7\u6C42\u4E2D\u91CD\u590D\u7684\u6570\u636E\u5E93\u67E5\u8BE2\u3002"),b=t(`<blockquote><p>\u7531\u4E8E\u4F7F\u7528\u5230\u4E86 laravel \u7684\u7F13\u5B58 tag \u6807\u8BB0\uFF0C\u652F\u6301\u7684\u7F13\u5B58\u9A71\u52A8\u6709\uFF1A<code>apc</code>, <code>array</code>, <code>redis</code>, <code>memcached</code>\uFF0C\u8FD9\u91CC\u63A8\u8350\u4F7F\u7528\u7684\u7F13\u5B58\u9A71\u52A8\u662F\uFF1A<code>redis</code>\u3002</p></blockquote><h2 id="\u5B89\u88C5\u548C\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u548C\u914D\u7F6E" aria-hidden="true">#</a> \u5B89\u88C5\u548C\u914D\u7F6E</h2><h3 id="\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a> \u5B89\u88C5</h3><p>\u6267\u884C\u4E0B\u9762\u7684\u4E24\u6761\u547D\u4EE4\uFF0C\u5B89\u88C5\u62D3\u5C55\u5305\u548C\u83B7\u53D6\u62D3\u5C55\u5305\u7684\u914D\u7F6E\u6587\u4EF6\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">composer</span> require neurony/laravel-query-cache

php artisan vendor:publish --provider<span class="token operator">=</span><span class="token string">&quot;Neurony\\QueryCache\\ServiceProvider&quot;</span> --tag<span class="token operator">=</span><span class="token string">&quot;config&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h3><ul><li>\u4FEE\u6539\u9879\u76EE\u73AF\u5883\u6587\u4EF6 <code>.env</code> \u4E2D\uFF0C\u6DFB\u52A0\u5982\u4E0B\u73AF\u5883\u53D8\u91CF\uFF1A</li></ul><div class="language-dotenv ext-dotenv line-numbers-mode"><pre class="language-dotenv"><code># The driver used for storing the cache keys that this package generates.
# This driver can differ from your main Laravel&#39;s CACHE_DRIVER.
QUERY_CACHE_DRIVER=redis

# Wether to cache absolutely all queries for the current request.
CACHE_ALL_QUERIES=true

# Wether to cache only the duplicated queries for the current request.
CACHE_DUPLICATE_QUERIES=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u4FEE\u6539\u8981\u7F13\u5B58\u7684\u6A21\u578B\u6DFB\u52A0 traits</li></ul><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Model</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Neurony<span class="token punctuation">\\</span>QueryCache<span class="token punctuation">\\</span>Traits<span class="token punctuation">\\</span>IsCacheable</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">YourModel</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">IsCacheable</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a> \u6D4B\u8BD5</h2>`,11),_=a("\u6211\u4EEC\u901A\u8FC7"),y={href:"https://github.com/barryvdh/laravel-debugbar",target:"_blank",rel:"noopener noreferrer"},f=a("barryvdh/laravel-debugbar"),q=a(" \u6765\u67E5\u770B\u4F18\u5316\u7ED3\u679C\u3002"),E=t(`<p>\u6BD4\u5982\u83B7\u53D6\u6240\u6709\u7684\u7528\u6237\u6570\u636E</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$users</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),x=["src"],C=t(`<p>\u518D\u6BD4\u5982\u83B7\u53D6\u5173\u8054\u6570\u636E\u7F13\u5B58</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),A=["src"],I=e("h2",{id:"\u53C2\u8003\u5730\u5740",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u53C2\u8003\u5730\u5740","aria-hidden":"true"},"#"),a(" \u53C2\u8003\u5730\u5740")],-1),N={href:"https://github.com/Neurony/laravel-query-cache",target:"_blank",rel:"noopener noreferrer"},w=a("Neurony/laravel-query-cache");function L(l,R){const n=i("ExternalLinkIcon");return r(),o(p,null,[d,h,e("p",null,[v,e("a",k,[m,s(n)]),g]),b,e("p",null,[_,e("a",y,[f,s(n)]),q]),E,e("img",{src:l.$withBase("/images/languages/laravel/packages/using-laravel-query-cache-package-to-optimize-laravel-eloquent-queries/laravel-query-cache.png"),alt:""},null,8,x),C,e("img",{src:l.$withBase("/images/languages/laravel/packages/using-laravel-query-cache-package-to-optimize-laravel-eloquent-queries/laravel-query-cache-relationship-data.png"),alt:""},null,8,A),I,e("ul",null,[e("li",null,[e("a",N,[w,s(n)])])])],64)}var T=c(u,[["render",L],["__file","using-laravel-query-cache-package-to-optimize-laravel-eloquent-queries.html.vue"]]);export{T as default};
