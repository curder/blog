import{_ as t,M as i,p as o,q as d,a1 as l,R as a,t as e,N as r}from"./framework-64ffeeb4.js";const p={},c={href:"https://forums.cpanel.net/threads/mysql-upgrade-process-failed-the-gpg-keys-listed-for-the-mysql-8-0-community-server-repository-are-already-installed-but-they-are-not-correct-for.697213/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/",target:"_blank",rel:"noopener noreferrer"};function m(h,s){const n=i("ExternalLinkIcon");return o(),d("div",null,[s[8]||(s[8]=l(`<h1 id="使用yum方式安装和配置mysql" tabindex="-1"><a class="header-anchor" href="#使用yum方式安装和配置mysql" aria-hidden="true">#</a> 使用yum方式安装和配置MySQL</h1><h2 id="安装mysql" tabindex="-1"><a class="header-anchor" href="#安装mysql" aria-hidden="true">#</a> 安装MySQL</h2><h3 id="安装-8-0" tabindex="-1"><a class="header-anchor" href="#安装-8-0" aria-hidden="true">#</a> 安装 8.0</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> https://repo.mysql.com/mysql80-community-release-el7-3.noarch.rpm
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/enabled=1/enabled=0/&#39;</span> /etc/yum.repos.d/mysql-community.repo <span class="token comment"># 启用MySQL 8社区版</span>
<span class="token function">sudo</span> yum <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span>mysql80-community <span class="token function">install</span> <span class="token parameter variable">-y</span> mysql-community-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4)),a("blockquote",null,[a("p",null,[s[1]||(s[1]=e("如果在安装的过程中遇到",-1)),s[2]||(s[2]=a("code",null,'MySQL Upgrade process failed - The GPG keys listed for the "MySQL 8.0 Community Server" repository are already installed but they are not correct for this repository.',-1)),s[3]||(s[3]=e(" 错误可以执行：",-1)),s[4]||(s[4]=a("code",null,"rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022",-1)),s[5]||(s[5]=e(" 命令，",-1)),a("a",c,[s[0]||(s[0]=e("具体查看这里",-1)),r(n)]),s[6]||(s[6]=e("。",-1))])]),s[9]||(s[9]=l(`<h2 id="安装mysql-5-7" tabindex="-1"><a class="header-anchor" href="#安装mysql-5-7" aria-hidden="true">#</a> 安装MySQL 5.7</h2><p>使用yum命令之前，需要安装MySQL5.7的rpm仓库。执行下面的命令安装MySQL</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql57-community-release-el7-11.noarch.rpm
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> mysql-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="启动mysql" tabindex="-1"><a class="header-anchor" href="#启动mysql" aria-hidden="true">#</a> 启动MySQL</h2><h3 id="守护进程方式mysql" tabindex="-1"><a class="header-anchor" href="#守护进程方式mysql" aria-hidden="true">#</a> 守护进程方式MySQL</h3><p>执行下面的命令启动<code>mysql</code>并使其在CentOS系统启动时运行。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start mysqld <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysqld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="配置mysql" tabindex="-1"><a class="header-anchor" href="#配置mysql" aria-hidden="true">#</a> 配置MySQL</h2><ul><li><p>获取安装时初始化密码</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">grep</span> <span class="token string">&#39;temporary password&#39;</span> /var/log/mysqld.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>登录并重设<strong>root</strong>账户密码</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span> <span class="token comment"># 回车输入上面获取到的密码</span>

ALTER <span class="token environment constant">USER</span> <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED BY <span class="token string">&#39;pId%Mm!2vs~qnM@LFf^Bm&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>授权新用户</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>CREATE <span class="token environment constant">USER</span> <span class="token string">&#39;new_user&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED BY <span class="token string">&#39;CKHbYiEpZokM9yB7ojqPUikSLX4P!8Y&#39;</span><span class="token punctuation">;</span>
GRANT ALL PRIVILEGES ON new_user_database.* TO <span class="token string">&#39;new_user&#39;</span>@<span class="token string">&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="检查mysql" tabindex="-1"><a class="header-anchor" href="#检查mysql" aria-hidden="true">#</a> 检查MySQL</h2><h3 id="检查端口" tabindex="-1"><a class="header-anchor" href="#检查端口" aria-hidden="true">#</a> 检查端口</h3><p>MySQL已经启动并在3306端口上运行，可以使用netstat命令检查。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">netstat</span> <span class="token parameter variable">-plntu</span> <span class="token operator">|</span><span class="token function">grep</span> <span class="token number">3306</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="检查进程" tabindex="-1"><a class="header-anchor" href="#检查进程" aria-hidden="true">#</a> 检查进程</h4><p>检查系统进程使用<code>ps</code>命令。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">ps</span> aux <span class="token operator">|</span><span class="token function">grep</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>至此，CentOS下安装<code>mysql</code>就安装好了。</p><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接" aria-hidden="true">#</a> 参考链接</h2>`,18)),a("ul",null,[a("li",null,[a("a",u,[s[7]||(s[7]=e("A Quick Guide to Using the MySQL Yum Repository",-1)),r(n)])])])])}const v=t(p,[["render",m],["__file","centos-7-uses-yum-way-to-install-and-configure-mysql.html.vue"]]);export{v as default};
