import{_ as i,r,o as c,c as l,b as e,a,F as d,d as s,e as o}from"./app.00a4b1d3.js";const h={},p=e("h1",{id:"\u4F7F\u7528docker-compose\u65B9\u5F0F\u5B89\u88C5gitlab\u670D\u52A1",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u4F7F\u7528docker-compose\u65B9\u5F0F\u5B89\u88C5gitlab\u670D\u52A1","aria-hidden":"true"},"#"),s(" \u4F7F\u7528Docker Compose\u65B9\u5F0F\u5B89\u88C5Gitlab\u670D\u52A1")],-1),b={href:"https://about.gitlab.com/",target:"_blank",rel:"noopener noreferrer"},u=s("GitLab"),_=s("\u662F\u4E00\u4E2A\u5F00\u6E90\u7684Git\u670D\u52A1\u8F6F\u4EF6\uFF0C\u5728\u5F00\u53D1\u4E2D\u4F7F\u7528\u5E7F\u6CDB\u3002\u5B83\u6709\u5F88\u4E30\u5BCC\u7684\u529F\u80FD\uFF08Git \u7248\u672C\u7BA1\u7406\u3001\u6587\u4EF6\u6D4F\u89C8\u3001WIKI\u3001Code Review\u3001Issue \u7BA1\u7406\u3001Code Snippets\u3001Web Hooks\u3001CI\u3001CD\u7B49\uFF09\u3002"),m=e("p",null,[s("\u4F7F\u7528Docker\u7684\u65B9\u5F0F\u6765\u5B89\u88C5\u670D\u52A1\u7AEF\u8F6F\u4EF6\u662F\u633A\u65B9\u4FBF\u7684\u3002\u4F46\u662FGitLab\u9700\u8981\u4E09\u4E2A\u670D\u52A1\uFF1A"),e("code",null,"Gitlab"),s("\uFF0C"),e("code",null,"PostgreSQL"),s("\u6570\u636E\u5E93\u548C"),e("code",null,"Redis"),s("\u7F13\u5B58\u3002")],-1),g=e("p",null,"\u5982\u679C\u7528\u547D\u4EE4\u884C\u76F4\u63A5\u8FD0\u884C\u5BB9\u5668\uFF0C\u9700\u8981\u4E09\u6761\u547D\u4EE4\uFF0C\u8FD8\u8981\u6307\u5B9A\u5F88\u591A\u7684\u914D\u7F6E\u9879\u3002",-1),k=s("\u8FD9\u91CC\u501F\u52A9"),v={href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"},f=s("docker-compose"),x=s("\u5DE5\u5177\u6765\u4E00\u6B21\u8FD0\u884C\u591A\u4E2A\u5BB9\u5668\u3002\u524D\u671F\u914D\u7F6E\u597D\u76F8\u5173\u7684\u5BB9\u5668\u7F16\u6392\u53C2\u6570\uFF0C\u53EA\u9700\u8981\u7B80\u5355\u7684\u547D\u4EE4\u884C\u5C31\u53EF\u4EE5\u5B8C\u6210GitLab\u670D\u52A1\u7684\u5B89\u88C5\u548C\u542F\u52A8\u3002"),y=s("\u6839\u636E\u5B98\u65B9\u63D0\u793A\uFF0C\u670D\u52A1\u5668\u7684\u914D\u7F6E\u4E4B\u5C11\u662F\uFF1A2Core-CPU 4GB-RAM\uFF0C\u5E76\u5B89\u88C5\u4E86"),G={href:"https://yeasy.gitbooks.io/docker_practice/content/install/",target:"_blank",rel:"noopener noreferrer"},C=s("docker"),L=s("\u548C"),w={href:"https://yeasy.gitbooks.io/docker_practice/content/compose/install.html",target:"_blank",rel:"noopener noreferrer"},D=s("docker-compose"),S=e("h2",{id:"\u955C\u50CF",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u955C\u50CF","aria-hidden":"true"},"#"),s(" \u955C\u50CF")],-1),U=e("ul",null,[e("li",null,"\u6E90\u4EE3\u7801\u4ED3\u5E93\uFF1A https://github.com/sameersbn/docker-gitlab")],-1),B=s("\u5305\u542B\u4E09\u4E2A\u955C\u50CF\uFF1A"),q={href:"https://registry.hub.docker.com/u/sameersbn/redis/",target:"_blank",rel:"noopener noreferrer"},I=s("redis"),E=s(", "),N={href:"https://hub.docker.com/r/sameersbn/postgresql/",target:"_blank",rel:"noopener noreferrer"},A=s("postgresql"),Z=s(", "),M={href:"https://registry.hub.docker.com/u/sameersbn/gitlab/",target:"_blank",rel:"noopener noreferrer"},P=s("gitlab"),R=e("h2",{id:"docker-compose-yam-file",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#docker-compose-yam-file","aria-hidden":"true"},"#"),s(" Docker Compose Yam File")],-1),T=e("p",null,"\u4E0A\u9762\u7684\u4E09\u4E2A\u955C\u50CF, \u5982\u679C\u76F4\u63A5\u7528Docker\u547D\u4EE4\u6765\u8FD0\u884C\u7684\u8BDD\uFF0C\u4F1A\u9700\u8981\u4E09\u6761\u547D\u4EE4\u3002\u5E76\u4E14\u8FD8\u8981\u6307\u5B9A\u5F88\u591A\u7684\u53C2\u6570\u6765\u6307\u5B9A\u4E00\u4E9B\u9009\u9879\u7684\u503C\uFF0C\u6BD4\u5982\u6570\u636E\u5E93\u7684\u7528\u6237\u540D\u6216\u5BC6\u7801\u3002Docker\u63D0\u4F9B\u4E86\u66F4\u65B9\u4FBF\u7684\u89E3\u51B3\u65B9\u6848\uFF1ADocker Compose\uFF0C\u7528\u4E00\u6761\u547D\u4EE4\u5C31\u53EF\u4EE5\u8DD1\u8D77\u591A\u4E2A\u5BB9\u5668\uFF0C\u6700\u9002\u5408\u8FD9\u79CD\u8FD0\u884C\u591A\u4E2A\u5BB9\u5668\u5171\u540C\u7EC4\u6210\u4E00\u4E2A\u670D\u52A1\u7684\u60C5\u666F\u3002",-1),V=s("Docker Compose\u63A5\u53D7\u4E00\u4E2A"),F=e("code",null,"docker-compose.yml",-1),O=s(" \u6587\u4EF6\u4F5C\u4E3A\u914D\u7F6E\u8F93\u5165\u3002yml\u6587\u4EF6\u6307\u5B9A\u4E86\u591A\u4E2A\u5BB9\u5668\u600E\u4E48\u542F\u52A8\uFF0C\u5F7C\u6B64\u4E4B\u95F4\u600E\u4E48\u8FDE\u63A5\u3002\u4E0B\u9762\u662F"),$={href:"https://github.com/sameersbn/docker-gitlab",target:"_blank",rel:"noopener noreferrer"},j=s("sameersbn/gitlab"),K=s("\u8FD9\u4E2A\u955C\u50CF\u6240\u63D0\u4F9B\u7684Yml\u6587\u4EF6(https://raw.githubusercontent.com/sameersbn/docker-gitlab/master/docker-compose.yml) ."),W=o(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6267\u884C\u4E0B\u9762\u7684\u547D\u4EE4\u5C06\u6587\u4EF6\u4E0B\u8F7D</span>
<span class="token function">wget</span> https://raw.githubusercontent.com/sameersbn/docker-gitlab/master/docker-compose.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u8F7D\u5B8C\u6210\u4E4B\u540E\uFF0C\u5728\u6587\u4EF6\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 GitLab \u7684\u5F88\u591A\u914D\u7F6E\u90FD\u5DF2\u7ECF\u53C2\u6570\u5316\u4E86\uFF0C\u5305\u6570\u636E\u5377\u7684\u914D\u7F6E\u3001\u670D\u52A1\u7684\u7AEF\u53E3\u3001\u5907\u4EFD\u65F6\u673A\u548C\u90AE\u4EF6\u914D\u7F6E\u7B49\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6216\u8005\u6267\u884C\u4E0B\u9762\u7684\u547D\u4EE4\u5C06\u5DF2\u7ECF\u6539\u597D\u7684\u6587\u4EF6\u4E0B\u8F7D</span>
<span class="token function">wget</span> -O docker-compose.yml https://gist.githubusercontent.com/curder/0b8a10a827a4f6236bccfddb0d8d5c46/raw/787cb4160caf73993a1d76b8d159c9024a5e3002/gitlab-docker-compose.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728MacOS\u4E0A\uFF0C\u4F7F\u7528<code>/Users/Shared</code>\u800C\u4E0D\u662F<code>/srv</code>\uFF0C\u6240\u4EE5\u6211\u5C06\u5176\u4E0B\u8F7D\u4E0B\u6765\u5E76\u5C06\u6587\u4EF6\u5185\u5BB9\u8FDB\u884C\u4E86\u9002\u5F53\u7684\u4FEE\u6539\uFF0C\u4E3B\u8981\u662F\u9488\u5BF9<code>volumn</code>\u76F8\u5173\u7684\u6620\u5C04\u8DEF\u5F84\u5B58\u50A8\u81F3\u5982\u4E0B\u8DEF\u5F84\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/Users/Shared/gitlab/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,5),Y=s("\u4FEE\u6539\u540E\u7684\u5B8C\u6574\u4EE3\u7801\u53EF\u4EE5"),z={href:"https://gist.github.com/curder/0b8a10a827a4f6236bccfddb0d8d5c46",target:"_blank",rel:"noopener noreferrer"},H=s("\u53C2\u8003\u8FD9\u91CC"),Q=s("\u3002"),J=o(`<p>\u4E3B\u8981\u4FEE\u6539\u5982\u4E0B\u6587\u4EF6\u5185\u5BB9</p><div class="language-ymal ext-ymal line-numbers-mode"><pre class="language-ymal"><code>- /Users/Shared/gitlab/redis:/var/lib/redis:Z
- /Users/Shared/gitlab/postgresql:/var/lib/postgresql:Z
- /Users/Shared/gitlab/gitlab:/home/git/data:Z

- TZ=Asia/Shanghai
- GITLAB_TIMEZONE=Beijing
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u542F\u52A8gitlab" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8gitlab" aria-hidden="true">#</a> \u542F\u52A8GitLab</h2><p>\u4FEE\u6539\u5B8C <code>docker-compose.yml</code>\uFF0C\u63A5\u4E0B\u6765\u53EF\u4EE5\u5229\u7528\u5982\u4E0B\u547D\u4EE4\u6765\u542F\u52A8 GitLab \u4E86\u3002</p>`,4),X=s("\u5982\u679C\u5F53\u524D\u7F51\u901F\u62C9\u53D6\u56FD\u5916\u7AD9\u70B9\u955C\u50CF\u7F13\u6162\uFF0C\u5EFA\u8BAE\u542F\u52A8\u4E4B\u524D\u53EF\u4EE5"),ee={href:"https://yeasy.gitbooks.io/docker_practice/install/mirror.html",target:"_blank",rel:"noopener noreferrer"},se=s("\u53C2\u8003\u8FD9\u91CC"),ne=s("\u4FEE\u6539docker\u955C\u50CF\u52A0\u901F\u5668\u3002"),ae=o(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> up -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u8FD9\u884C\u547D\u4EE4\uFF0C\u9996\u5148\u4F1A\u4E0B\u8F7D\u76F8\u5173\u7684\u955C\u50CF\uFF0C\u7136\u540E\u4F9D\u6B21\u521B\u5EFA\u5E76\u542F\u52A8\u5BB9\u5668\u3002\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p>`,2),oe=["src"],te=o(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u279C  gitlab-docker <span class="token function">docker-compose</span> <span class="token function">ps</span>
           Name                         Command               State                           Ports
---------------------------------------------------------------------------------------------------------------------------
gitlab-docker_gitlab_1       /sbin/entrypoint.sh app:start    Up      <span class="token number">0.0</span>.0.0:10022-<span class="token operator">&gt;</span><span class="token number">22</span>/tcp, <span class="token number">443</span>/tcp, <span class="token number">0.0</span>.0.0:10080-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp
gitlab-docker_postgresql_1   /sbin/entrypoint.sh              Up      <span class="token number">5432</span>/tcp
gitlab-docker_redis_1        /sbin/entrypoint.sh --logl <span class="token punctuation">..</span>.   Up      <span class="token number">6379</span>/tcp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u542F\u52A8\u5B8C\u6210\u4E4B\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u4E2D\u8F93\u5165<code>http://localhost:10080</code>\uFF0C\u5982\u679C\u6682\u65F6\u80FD\u591F\u8BBF\u95EE\u5374\u4E0D\u80FD\u6B63\u786E\u6253\u5F00\uFF0C\u90A3\u4E48\u8BF4\u660E GitLab \u521B\u5EFA\u8FD8\u672A\u542F\u52A8\u6210\u529F\u3002\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p>`,2),ie=["src"],re=e("p",null,[s("\u7B2C\u4E00\u6B21\u6210\u529F\u8FDB\u5165gitlab\u9700\u8981\u8F93\u5165root\u7684\u521D\u59CB\u5BC6\u7801\uFF0C"),e("strong",null,"\u5BC6\u7801\u9700\u8981\u4FDD\u6301\u57288\u4F4D\u6570\u4EE5\u4E0A"),s("\u3002")],-1),ce=["src"],le=o(`<h2 id="\u76F8\u5173\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173\u547D\u4EE4" aria-hidden="true">#</a> \u76F8\u5173\u547D\u4EE4</h2><h3 id="\u542F\u52A8gitlab-1" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8gitlab-1" aria-hidden="true">#</a> \u542F\u52A8GitLab</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u505C\u6B62-gitlab" tabindex="-1"><a class="header-anchor" href="#\u505C\u6B62-gitlab" aria-hidden="true">#</a> \u505C\u6B62 GitLab</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u5907\u4EFD-gitlab" tabindex="-1"><a class="header-anchor" href="#\u5907\u4EFD-gitlab" aria-hidden="true">#</a> \u5907\u4EFD GitLab</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> run gitlab app:rake gitlab:backup:create
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u4ECE\u5907\u4EFD\u4E2D\u8FD8\u539F" tabindex="-1"><a class="header-anchor" href="#\u4ECE\u5907\u4EFD\u4E2D\u8FD8\u539F" aria-hidden="true">#</a> \u4ECE\u5907\u4EFD\u4E2D\u8FD8\u539F</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> run --rm gitlab app:rake gitlab:backup:restore <span class="token assign-left variable">BACKUP</span><span class="token operator">=</span>1529921023_2018_06_25_11.0.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,9),de=s("\u5728\u4E0A\u9762\u7684\u547D\u4EE4\u4E2D\uFF0C"),he=e("code",null,"1529921023_2018_06_25_11.0.0",-1),pe=s(" \u4E3A\u5907\u4EFD\u6587\u4EF6\u7684\u65F6\u95F4\u6233\u524D\u7F00\uFF0C\u8BE5\u6587\u4EF6\u4F4D\u4E8E gitlab \u7684 "),be=e("code",null,"backups",-1),ue=s(" \u76EE\u5F55\u4E2D\u3002 \u66F4\u591A\u5907\u4EFD\u548C\u8FD8\u539F\u76F8\u5173\u64CD\u4F5C"),_e={href:"https://github.com/sameersbn/docker-gitlab/blob/master/README.md#restoring-backups",target:"_blank",rel:"noopener noreferrer"},me=s("\u53C2\u89C1\u6587\u6863"),ge=s("\u3002"),ke=e("h2",{id:"\u53C2\u8003\u94FE\u63A5",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u53C2\u8003\u94FE\u63A5","aria-hidden":"true"},"#"),s(" \u53C2\u8003\u94FE\u63A5")],-1),ve={href:"http://wuyijun.cn/yong-dockerfang-shi-an-zhuang-gitlabfu-wu/",target:"_blank",rel:"noopener noreferrer"},fe=s("\u7528Docker Compose\u65B9\u5F0F\u5B89\u88C5Gitlab\u670D\u52A1"),xe={href:"http://beyondvincent.com/2016/09/19/2016-09-17-use-gitlab-with-docker/",target:"_blank",rel:"noopener noreferrer"},ye=s("\u5728 Docker \u4E2D\u4F7F\u7528 GitLab");function Ge(t,Ce){const n=r("ExternalLinkIcon");return c(),l(d,null,[p,e("p",null,[e("a",b,[u,a(n)]),_]),m,g,e("p",null,[k,e("a",v,[f,a(n)]),x]),e("blockquote",null,[e("p",null,[y,e("a",G,[C,a(n)]),L,e("a",w,[D,a(n)])])]),S,U,e("blockquote",null,[e("p",null,[B,e("a",q,[I,a(n)]),E,e("a",N,[A,a(n)]),Z,e("a",M,[P,a(n)])])]),R,T,e("p",null,[V,F,O,e("a",$,[j,a(n)]),K]),W,e("p",null,[Y,e("a",z,[H,a(n)]),Q]),J,e("blockquote",null,[e("p",null,[X,e("a",ee,[se,a(n)]),ne])]),ae,e("img",{src:t.$withBase("/images/tools/docker/installing-gitlab-services-using-docker-compose/docker-compose-gitlab-image.png"),alt:""},null,8,oe),te,e("img",{src:t.$withBase("/images/tools/docker/installing-gitlab-services-using-docker-compose/docker-compose-gitlab-image-502-error.png"),alt:""},null,8,ie),re,e("img",{src:t.$withBase("/images/tools/docker/installing-gitlab-services-using-docker-compose/docker-compose-gitlab-image-need-reset-password.png"),alt:""},null,8,ce),le,e("blockquote",null,[e("p",null,[de,he,pe,be,ue,e("a",_e,[me,a(n)]),ge])]),ke,e("ul",null,[e("li",null,[e("p",null,[e("a",ve,[fe,a(n)])])]),e("li",null,[e("p",null,[e("a",xe,[ye,a(n)])])])])],64)}var we=i(h,[["render",Ge],["__file","installing-gitlab-services-using-docker-compose.html.vue"]]);export{we as default};
