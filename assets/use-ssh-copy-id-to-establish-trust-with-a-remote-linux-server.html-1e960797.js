import{_ as o,M as c,p,q as t,R as e,t as a,N as n,a1 as i}from"./framework-96b046e1.js";const d={},l=i(`<h1 id="使用ssh-copy-id建立与远端linux服务器的信任" tabindex="-1"><a class="header-anchor" href="#使用ssh-copy-id建立与远端linux服务器的信任" aria-hidden="true">#</a> 使用<code>ssh-copy-id</code>建立与远端Linux服务器的信任</h1><p>在工作中常常会需要使用SSH登录服务器，这个时候会频繁的输入用户名和密码，获得服务器的信任才能操作。</p><p>往复的工作中会发现这个输入用户名和密码的操作其实是很繁琐的。今天使用<code>ssh-copy-id</code>来获得服务器的信任。</p><p><code>ssh-copy-id</code>的作用其实就是把本地的公钥写入到远程主机的<code>~/.ssh/authorized_keys</code>文件上，<code>ssh-copy-id</code>命令也会给远程主机的用户主目录（home）和<code>~/.ssh</code> 和<code>~/.ssh/authorized_keys</code>设置合适的权限。</p><h3 id="使用-ssh-keygen-命令生成个人公、秘钥" tabindex="-1"><a class="header-anchor" href="#使用-ssh-keygen-命令生成个人公、秘钥" aria-hidden="true">#</a> 使用 <code>ssh-keygen</code> 命令生成个人公、秘钥</h3><p>ssh公钥认证是ssh认证的方式之一。通过公钥认证可实现ssh免密码登陆，git的ssh方式也是通过公钥进行认证的。更多原理请参考文章尾部的参考地址。</p><p>生成命令如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在命令行输入完上面的命令后一直按回车得到生成的公私钥：<code>~/.ssh/id_rsa.pub</code>和<code>~/.ssh/id_rsa</code>文件。</p><h3 id="使用-ssh-copy-id-建立信任" tabindex="-1"><a class="header-anchor" href="#使用-ssh-copy-id-建立信任" aria-hidden="true">#</a> 使用 <code>ssh-copy-id</code> 建立信任</h3><h4 id="命令参数" tabindex="-1"><a class="header-anchor" href="#命令参数" aria-hidden="true">#</a> 命令参数</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ssh-copy-id <span class="token punctuation">[</span>-h<span class="token operator">|</span>-?<span class="token operator">|</span>-f<span class="token operator">|</span>-n<span class="token punctuation">]</span> <span class="token punctuation">[</span>-i <span class="token punctuation">[</span>identity_file<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-p port<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>-o <span class="token operator">&lt;</span>ssh <span class="token parameter variable">-o</span> options<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>user@<span class="token punctuation">]</span>hostname
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><code>-b</code>：指定密钥长度</p></li><li><p><code>-e</code>：读取openssh的私钥或者公钥文件</p></li><li><p><code>-C</code>：添加注释</p></li><li><p><code>-f</code>：指定用来保存密钥的文件名</p></li><li><p><code>-p</code>：指定远程服务器SSH端口</p></li><li><p><code>-i</code>：读取未加密的ssh-v2兼容的私钥/公钥文件，然后在标准输出设备上显示openssh兼容的私钥/公钥</p></li><li><p><code>-l</code>：显示公钥文件的指纹数据</p></li><li><p><code>-N</code>：提供一个新密语</p></li><li><p><code>-P</code>：提供（旧）密语</p></li><li><p><code>-q</code>：静默模式</p></li><li><p><code>-t</code>：指定要创建的密钥类型</p></li><li><p><code>-p</code>：指定远程服务器SSH端口</p></li></ul><blockquote><p>参数比较多，相对常用的是<code>-i</code>和<code>-p</code>参数。</p></blockquote><h4 id="具体命令" tabindex="-1"><a class="header-anchor" href="#具体命令" aria-hidden="true">#</a> 具体命令</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ssh-copy-id <span class="token parameter variable">-i</span> ~/.ssh/id_rsa.pub <span class="token parameter variable">-p</span> <span class="token number">2200</span> user_name@your_server_ip_address
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>这里需要注意参数的位置不要弄错了。</p></blockquote><h2 id="参考地址" tabindex="-1"><a class="header-anchor" href="#参考地址" aria-hidden="true">#</a> 参考地址</h2>`,18),r={href:"http://www.cnblogs.com/xia/archive/2013/03/22/2975998.html",target:"_blank",rel:"noopener noreferrer"},h={href:"https://blog.csdn.net/wos1002/article/details/56483277",target:"_blank",rel:"noopener noreferrer"},u={href:"http://roclinux.cn/?p=2551",target:"_blank",rel:"noopener noreferrer"};function k(b,_){const s=c("ExternalLinkIcon");return p(),t("div",null,[l,e("ul",null,[e("li",null,[e("p",null,[e("a",r,[a("ssh-copy-id端口问题"),n(s)])])]),e("li",null,[e("p",null,[e("a",h,[a("ssh-keygen AND ssh-copy-id用法"),n(s)])])]),e("li",null,[e("p",null,[e("a",u,[a("ssh-copy-id帮你建立信任"),n(s)])])])])])}const v=o(d,[["render",k],["__file","use-ssh-copy-id-to-establish-trust-with-a-remote-linux-server.html.vue"]]);export{v as default};
