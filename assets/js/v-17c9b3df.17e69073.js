(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2861],{6158:(s,a,n)=>{"use strict";n.r(a),n.d(a,{data:()=>e});const e={key:"v-17c9b3df",path:"/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-mysql.html",title:"CentOS7使用yum方式安装和配置MySQL",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"安装MySQL",slug:"安装mysql",children:[{level:3,title:"使用yum命令安装MySQL",slug:"使用yum命令安装mysql",children:[]}]},{level:2,title:"启动MySQL",slug:"启动mysql",children:[{level:3,title:"守护进程方式MySQL",slug:"守护进程方式mysql",children:[]},{level:3,title:"使用supervisord管理进程",slug:"使用supervisord管理进程",children:[]}]},{level:2,title:"配置MySQL",slug:"配置mysql",children:[]},{level:2,title:"检查MySQL",slug:"检查mysql",children:[{level:3,title:"检查端口",slug:"检查端口",children:[]}]},{level:2,title:"参考链接",slug:"参考链接",children:[]}],filePathRelative:"os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-mysql.md",git:{updatedTime:1625565406e3,contributors:[]}}},9998:(s,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>u});var e=n(6252);const l=(0,e.uE)('<h1 id="centos7使用yum方式安装和配置mysql" tabindex="-1"><a class="header-anchor" href="#centos7使用yum方式安装和配置mysql" aria-hidden="true">#</a> CentOS7使用yum方式安装和配置MySQL</h1><p>以安装 MySQL 5.7 为例。</p><h2 id="安装mysql" tabindex="-1"><a class="header-anchor" href="#安装mysql" aria-hidden="true">#</a> 安装MySQL</h2><h3 id="使用yum命令安装mysql" tabindex="-1"><a class="header-anchor" href="#使用yum命令安装mysql" aria-hidden="true">#</a> 使用yum命令安装MySQL</h3><p>使用yum命令之前，需要安装MySQL5.7的rpm仓库。执行下面的命令安装MySQL</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm\n<span class="token function">rpm</span> -ivh mysql57-community-release-el7-11.noarch.rpm\n<span class="token function">sudo</span> yum <span class="token function">install</span> -y mysql-server\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="启动mysql" tabindex="-1"><a class="header-anchor" href="#启动mysql" aria-hidden="true">#</a> 启动MySQL</h2><h3 id="守护进程方式mysql" tabindex="-1"><a class="header-anchor" href="#守护进程方式mysql" aria-hidden="true">#</a> 守护进程方式MySQL</h3><p>执行下面的命令启动<code>mysql</code>并使其在CentOS系统启动时运行。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start mysqld <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysqld\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="使用supervisord管理进程" tabindex="-1"><a class="header-anchor" href="#使用supervisord管理进程" aria-hidden="true">#</a> 使用supervisord管理进程</h3>',11),r={href:"/os/centos/how-to-use-supervisord-manager-processes.md",target:"_blank",rel:"noopener noreferrer"},t=(0,e.Uk)("supervisord"),p=(0,e.Uk)("的进程管理参考这里。"),o=(0,e.uE)('<h4 id="mysql的supervisord配置文件" tabindex="-1"><a class="header-anchor" href="#mysql的supervisord配置文件" aria-hidden="true">#</a> MySQL的supervisord配置文件</h4><p>默认的 supervisord 的进程文件保存在<code>/etc/supervisord.d/mysql.ini</code>，内容如下：</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">program:mysql</span><span class="token punctuation">]</span></span>\n<span class="token key attr-name">command</span> <span class="token punctuation">=</span> <span class="token value attr-value">/usr/sbin/mysqld --user=mysql</span>\n<span class="token key attr-name">user</span> <span class="token punctuation">=</span> <span class="token value attr-value">root</span>\n<span class="token key attr-name">autostart</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>\n<span class="token key attr-name">autorestart</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>\n<span class="token key attr-name">stdout_logfile</span> <span class="token punctuation">=</span> <span class="token value attr-value">/var/log/mysql.out.log</span>\n<span class="token key attr-name">stderr_logfile</span> <span class="token punctuation">=</span> <span class="token value attr-value">/var/log/mysql.err.log</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="重载配置" tabindex="-1"><a class="header-anchor" href="#重载配置" aria-hidden="true">#</a> 重载配置</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>supervisorctl reread <span class="token operator">&amp;&amp;</span> supervisorctl update\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行完上面的命令，可以看到控制台会输出如下结果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysql: available\nmysql: added process group\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>至此使用 supervisord 管理<code>mysql</code>进程已经完成。</p><h2 id="配置mysql" tabindex="-1"><a class="header-anchor" href="#配置mysql" aria-hidden="true">#</a> 配置MySQL</h2><ul><li><p>获取安装时初始化密码</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">grep</span> <span class="token string">&#39;temporary password&#39;</span> /var/log/mysqld.log\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>登录并重设<strong>root</strong>账户密码</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysql -uroot -p <span class="token comment"># 回车输入上面获取到的密码</span>\n\nALTER <span class="token environment constant">USER</span> <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED BY <span class="token string">&#39;MyNewPassword1!&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>授权新用户</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>CREATE <span class="token environment constant">USER</span> <span class="token string">&#39;new_user&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED BY <span class="token string">&#39;CKHbYiEpZokM9yB7ojqPUikSLX4P!8Y&#39;</span><span class="token punctuation">;</span>\nGRANT ALL PRIVILEGES ON new_user_database.* TO <span class="token string">&#39;new_user&#39;</span>@<span class="token string">&#39;localhost&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h2 id="检查mysql" tabindex="-1"><a class="header-anchor" href="#检查mysql" aria-hidden="true">#</a> 检查MySQL</h2><h3 id="检查端口" tabindex="-1"><a class="header-anchor" href="#检查端口" aria-hidden="true">#</a> 检查端口</h3><p>MySQL已经启动并在3306端口上运行，可以使用netstat命令检查。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">netstat</span> -plntu <span class="token operator">|</span><span class="token function">grep</span> <span class="token number">3306</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="检查进程" tabindex="-1"><a class="header-anchor" href="#检查进程" aria-hidden="true">#</a> 检查进程</h4><p>检查系统进程使用<code>ps</code>命令。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">ps</span> aux <span class="token operator">|</span><span class="token function">grep</span> mysql\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>至此，CentOS下安装<code>mysql</code>就安装好了。</p><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接" aria-hidden="true">#</a> 参考链接</h2>',19),i={href:"https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Uk)("A Quick Guide to Using the MySQL Yum Repository"),u={render:function(s,a){const n=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.j4)(e.HY,null,[l,(0,e.Wm)("p",null,[(0,e.Wm)("a",r,[t,(0,e.Wm)(n)]),p]),o,(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)("a",i,[c,(0,e.Wm)(n)])])])],64)}}}}]);