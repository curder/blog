"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[923],{7915:(e,a,n)=>{n.r(a),n.d(a,{data:()=>s});const s={key:"v-5c522b07",path:"/tools/valet/valet-install.html",title:"Mac开发环境Laravel Valet实践",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"安装前的准备",slug:"安装前的准备",children:[{level:3,title:"安装",slug:"安装",children:[]}]},{level:2,title:"测试Valet运行Laravel",slug:"测试valet运行laravel",children:[{level:3,title:"项目别名",slug:"项目别名",children:[]},{level:3,title:"站点支持TLS",slug:"站点支持tls",children:[]},{level:3,title:"分享站点",slug:"分享站点",children:[]}]}],filePathRelative:"tools/valet/valet-install.md",git:{updatedTime:1641800329e3,contributors:[{name:"curder",email:"q.curder@gmail.com",commits:1}]}}},1833:(e,a,n)=>{n.r(a),n.d(a,{default:()=>De});var s=n(6252);const l=(0,s._)("h1",{id:"mac开发环境laravel-valet实践",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#mac开发环境laravel-valet实践","aria-hidden":"true"},"#"),(0,s.Uk)(" Mac开发环境Laravel Valet实践")],-1),r={href:"https://laravel.com/docs/5.5/valet",title:"Laravel Valet",target:"_blank",rel:"noopener noreferrer"},t=(0,s.Uk)("Laravel Valet"),o=(0,s.Uk)("是一个"),p=(0,s._)("strong",null,"Mac",-1),i=(0,s.Uk)("下面的常见框架的极简开发环境，不但可以本地开发，还可以分享到公网访问。"),c=(0,s.Uk)("当Mac电脑开机后会在后台一直启动 "),d={href:"https://caddyserver.com/",target:"_blank",rel:"noopener noreferrer"},u=(0,s.Uk)("Caddy"),b=(0,s.Uk)(","),m=(0,s._)("code",null,"Valet",-1),h=(0,s.Uk)("通过 "),g={href:"https://en.wikipedia.org/wiki/Dnsmasq",target:"_blank",rel:"noopener noreferrer"},v=(0,s.Uk)("DnsMasq"),k=(0,s.Uk)(" 把所有的"),f=(0,s._)("code",null,".dev",-1),_=(0,s.Uk)("为后缀的域名指向本地安装的站点。比如站点所在目录"),U=(0,s._)("code",null,"blog",-1),x=(0,s.Uk)(", 通过浏览器访问"),w=(0,s._)("code",null,"blog.dev",-1),W=(0,s.Uk)("就会自动访问到"),y=(0,s._)("code",null,"blog/public",-1),q=(0,s.Uk)(" 目录了。分享到公网其实主要依靠"),V={href:"https://ngrok.com/",target:"_blank",rel:"noopener noreferrer"},L=(0,s.Uk)("ngrok"),C=(0,s.Uk)("来实现的。"),S=(0,s._)("p",null,"目前能直接支持如下项目：",-1),M={href:"https://laravel.com/",target:"_blank",rel:"noopener noreferrer"},D=(0,s.Uk)("Laravel"),P={href:"https://lumen.laravel.com/",target:"_blank",rel:"noopener noreferrer"},T=(0,s.Uk)("Lumen"),j={href:"https://roots.io/bedrock/",target:"_blank",rel:"noopener noreferrer"},B=(0,s.Uk)("Bedrock"),E={href:"https://cakephp.org/",target:"_blank",rel:"noopener noreferrer"},H=(0,s.Uk)("CakePHP 3"),O={href:"http://www.concrete5.org/",target:"_blank",rel:"noopener noreferrer"},R=(0,s.Uk)("Concrete5"),Z={href:"https://contao.org/en/",target:"_blank",rel:"noopener noreferrer"},z=(0,s.Uk)("Contao"),F={href:"https://craftcms.com/",target:"_blank",rel:"noopener noreferrer"},I=(0,s.Uk)("Craft"),J={href:"https://www.drupal.org/",target:"_blank",rel:"noopener noreferrer"},K=(0,s.Uk)("Drupal"),N={href:"http://jigsaw.tighten.co/",target:"_blank",rel:"noopener noreferrer"},$=(0,s.Uk)("Jigsaw"),G={href:"https://www.joomla.org/",target:"_blank",rel:"noopener noreferrer"},Y=(0,s.Uk)("Joomla"),A={href:"https://github.com/themsaid/katana",target:"_blank",rel:"noopener noreferrer"},Q=(0,s.Uk)("Katana"),X={href:"https://getkirby.com/",target:"_blank",rel:"noopener noreferrer"},ee=(0,s.Uk)("Kirby"),ae={href:"https://magento.com/",target:"_blank",rel:"noopener noreferrer"},ne=(0,s.Uk)("Magento"),se={href:"https://octobercms.com/",target:"_blank",rel:"noopener noreferrer"},le=(0,s.Uk)("OctoberCMS"),re={href:"https://sculpin.io/",target:"_blank",rel:"noopener noreferrer"},te=(0,s.Uk)("Sculpin"),oe={href:"https://www.slimframework.com/",target:"_blank",rel:"noopener noreferrer"},pe=(0,s.Uk)("Slim"),ie={href:"https://statamic.com/",target:"_blank",rel:"noopener noreferrer"},ce=(0,s.Uk)("Statamic"),de=(0,s._)("li",null,"Static HTML",-1),ue={href:"https://symfony.com/",target:"_blank",rel:"noopener noreferrer"},be=(0,s.Uk)("Symfony"),me={href:"https://wordpress.org/",target:"_blank",rel:"noopener noreferrer"},he=(0,s.Uk)("WordPress"),ge={href:"https://framework.zend.com/",target:"_blank",rel:"noopener noreferrer"},ve=(0,s.Uk)("Zend"),ke=(0,s._)("strong",null,"当然，我们也是可以自己驱动，",-1),fe={href:"https://laravel.com/docs/5.4/valet#custom-valet-drivers",title:"Custom Valet Drivers",target:"_blank",rel:"noopener noreferrer"},_e=(0,s._)("strong",null,"Custom Valet Drivers",-1),Ue=(0,s.Uk)("。"),xe=(0,s.uE)('<h2 id="安装前的准备" tabindex="-1"><a class="header-anchor" href="#安装前的准备" aria-hidden="true">#</a> 安装前的准备</h2><ul><li><p>homebrew</p></li><li><p>php70</p></li><li><p>composer</p></li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>brew update\nbrew services list\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>如果没有安装 composer，可以使用命令<code>brew install composer</code>进行安装</li></ul><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><h4 id="安装valet" tabindex="-1"><a class="header-anchor" href="#安装valet" aria-hidden="true">#</a> 安装Valet</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">composer</span> global require laravel/valet\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="安装valet和dnsmasq" tabindex="-1"><a class="header-anchor" href="#安装valet和dnsmasq" aria-hidden="true">#</a> 安装Valet和DnsMasq</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>valet <span class="token function">install</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果<strong>DnsMasq安装失败可以使用命令手动安装</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>brew <span class="token function">install</span> dnsmasq\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行完成后，使用ping命令试试效果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ping</span> <span class="token string">&quot;*.dev&quot;</span>\nPING *.dev <span class="token punctuation">(</span><span class="token number">127.0</span>.0.1<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes\n<span class="token number">64</span> bytes from <span class="token number">127.0</span>.0.1: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.027</span> ms\n<span class="token number">64</span> bytes from <span class="token number">127.0</span>.0.1: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.036</span> ms\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>如果能ping通，则表示配置成功。此时我们可以拿一个项目来测试一下</p></blockquote><h2 id="测试valet运行laravel" tabindex="-1"><a class="header-anchor" href="#测试valet运行laravel" aria-hidden="true">#</a> 测试Valet运行Laravel</h2><ul><li>创建文件夹并进入</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> ~/Website <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ~/Website\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>运行<code>valet park</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>valet park\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>这条命令是将上面的目录，也就是<code>~/Website</code>目录作为寻找站点的路径。</p></blockquote><ul><li>创建Laravel项目</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>laravel new blog\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果不存在 laravel 命令，则运行 <code>composer global require &quot;laravel/installer&quot;</code>拿到laravel命令。</p><ul><li>访问<code>blog.dev</code>项目</li></ul>',24),we=["src"],We=(0,s.uE)('<h3 id="项目别名" tabindex="-1"><a class="header-anchor" href="#项目别名" aria-hidden="true">#</a> 项目别名</h3><p><code>park</code>命令会把这个目录下所有文件夹都当做独立的不同站点，而当你只需要启动一个站点的时候，可以使用 <code>link</code>命令。</p><p><code>link</code>命令也可以用来启动 Laravel 站点。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/Website/blog\nvalet <span class="token function">link</span> test-blog\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>',4),ye=(0,s.Uk)("执行上面命令就可以在本地浏览器通过 "),qe={href:"http://test-blog.dev/",target:"_blank",rel:"noopener noreferrer"},Ve=(0,s.Uk)("http://test-blog.dev"),Le=(0,s.Uk)(" 访问blog项目的站点了。"),Ce=["src"],Se=(0,s.uE)('<p>另外还有了两个比较有用的命令如：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>valet links\nvalet unlink\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>其中 <code>links</code> 是查看当前所有的项目别名，<code>unlink</code> 则是将已有的别名移除。</p><h3 id="站点支持tls" tabindex="-1"><a class="header-anchor" href="#站点支持tls" aria-hidden="true">#</a> 站点支持TLS</h3><p>让站点支持TLS也很简单，只需要执行：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>valet secure blog\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>这样就可以用 <code>https://blog.dev</code> 进行访问了，如果想取消的话可以使用下面的命令：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>valet unsecure blog\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="分享站点" tabindex="-1"><a class="header-anchor" href="#分享站点" aria-hidden="true">#</a> 分享站点</h3><p>这个功能是让本地开发的项目通过分享给互联网上其他用户进行访问呢，只需要在项目根目录下执行一个命令就可以</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>valet share\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>这样就会通过<code>ngrok</code>生成一个外网URL，要停止分享，可以按 <code>control + c</code>来取消进程。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ngrok by @inconshreveable                                                                        <span class="token punctuation">(</span>Ctrl+C to quit<span class="token punctuation">)</span>\n\nSession Status                online\nUpdate                        update available <span class="token punctuation">(</span>version <span class="token number">2.2</span>.8, Ctrl-U to update<span class="token punctuation">)</span>\nVersion                       <span class="token number">2.1</span>.18\nRegion                        United States <span class="token punctuation">(</span>us<span class="token punctuation">)</span>\nWeb Interface                 http://127.0.0.1:4040\nForwarding                    http://3c378de6.ngrok.io -<span class="token operator">&gt;</span> test-blog.dev:80\nForwarding                    https://3c378de6.ngrok.io -<span class="token operator">&gt;</span> test-blog.dev:80\n\nConnections                   ttl     opn     rt1     rt5     p50     p90\n                              <span class="token number">0</span>       <span class="token number">0</span>       <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="valet其他命令-valet" tabindex="-1"><a class="header-anchor" href="#valet其他命令-valet" aria-hidden="true">#</a> <code>Valet</code>其他命令 {#valet}</h4><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>valet forget</code></td><td style="text-align:left;">在 “对应” 的目录中执行该命令来把其从“对应” 目录列表中删除</td></tr><tr><td style="text-align:left;"><code>valet paths</code></td><td style="text-align:left;">查看所有paths路径</td></tr><tr><td style="text-align:left;"><code>valet restart</code></td><td style="text-align:left;">重启 Valet 程序</td></tr><tr><td style="text-align:left;"><code>valet start</code></td><td style="text-align:left;">启动 Valet 程序</td></tr><tr><td style="text-align:left;"><code>valet stop</code></td><td style="text-align:left;">停止 Valet 程序</td></tr><tr><td style="text-align:left;"><code>valet uninstall</code></td><td style="text-align:left;">卸载 Valet 程序</td></tr></tbody></table>',15),Me={},De=(0,n(3744).Z)(Me,[["render",function(e,a){const n=(0,s.up)("OutboundLink");return(0,s.wg)(),(0,s.iD)(s.HY,null,[l,(0,s._)("p",null,[(0,s._)("a",r,[t,(0,s.Wm)(n)]),o,p,i]),(0,s._)("p",null,[c,(0,s._)("a",d,[u,(0,s.Wm)(n)]),b,m,h,(0,s._)("a",g,[v,(0,s.Wm)(n)]),k,f,_,U,x,w,W,y,q,(0,s._)("a",V,[L,(0,s.Wm)(n)]),C]),S,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s._)("a",M,[D,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",P,[T,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",j,[B,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",E,[H,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",O,[R,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",Z,[z,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",F,[I,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",J,[K,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",N,[$,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",G,[Y,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",A,[Q,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",X,[ee,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",ae,[ne,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",se,[le,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",re,[te,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",oe,[pe,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",ie,[ce,(0,s.Wm)(n)])]),de,(0,s._)("li",null,[(0,s._)("a",ue,[be,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",me,[he,(0,s.Wm)(n)])]),(0,s._)("li",null,[(0,s._)("a",ge,[ve,(0,s.Wm)(n)])])]),(0,s._)("p",null,[ke,(0,s._)("a",fe,[_e,(0,s.Wm)(n)]),Ue]),xe,(0,s._)("img",{src:e.$withBase("/images/tools/valet/valet-install/blog.dev.jpg"),alt:""},null,8,we),We,(0,s._)("p",null,[ye,(0,s._)("a",qe,[Ve,(0,s.Wm)(n)]),Le]),(0,s._)("img",{src:e.$withBase("/images/tools/valet/valet-install/test-blog.dev.jpg"),alt:""},null,8,Ce),Se],64)}]])},3744:(e,a)=>{a.Z=(e,a)=>{const n=e.__vccOpts||e;for(const[e,s]of a)n[e]=s;return n}}}]);