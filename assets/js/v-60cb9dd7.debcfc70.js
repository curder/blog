(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9608],{8408:(e,n,s)=>{"use strict";s.r(n),s.d(n,{data:()=>t});const t={key:"v-60cb9dd7",path:"/tools/how-to-configure-ssi-support-in-nginx-or-apache-server.html",title:"在Nginx或者Apache服务器中配置SSI支持",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"什么是SSI",slug:"什么是ssi",children:[]},{level:2,title:"指令配置",slug:"指令配置",children:[{level:3,title:"Nginx启用SSI",slug:"nginx启用ssi",children:[]},{level:3,title:"Apache上启用SSI",slug:"apache上启用ssi",children:[]}]},{level:2,title:"参考链接",slug:"参考链接",children:[]}],filePathRelative:"tools/how-to-configure-ssi-support-in-nginx-or-apache-server.md",git:{updatedTime:1639727659e3,contributors:[]}}},7879:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>S});var t=s(6252);const a=(0,t.uE)('<h1 id="在nginx或者apache服务器中配置ssi支持" tabindex="-1"><a class="header-anchor" href="#在nginx或者apache服务器中配置ssi支持" aria-hidden="true">#</a> 在Nginx或者Apache服务器中配置SSI支持</h1><p>虽然一直在使用动态语言开发WEB站点，但在很早之前维护的项目中用过一些特殊的标签。由于服务器是前面同事配置好只要按照规则写就会生效，而在我本地的服务器却始终无法展现预期的结果，这让我很困惑。</p><p>一般情况下，在开发静态网页时，网页的头部和尾部基本是一样的，此时当然可以每个页面是独立编写，这样的做法会有大量重复代码，不便于后期修改维护。</p><p>这时通过配置服务器的SSI支持来达到简化这一重复编码文件的目的。</p><h2 id="什么是ssi" tabindex="-1"><a class="header-anchor" href="#什么是ssi" aria-hidden="true">#</a> 什么是SSI</h2><p><strong>SSI</strong>是Server Sidde Include的缩写，是服务器包含的意思，支持大部分的web服务器，例如：Apache、Nginx、Tomcat等等。</p><p>它的工作原理是：在页面发送到客户端之前，使用SSI指令将待包含的文件、图片等文件包含到请求的网页中，通过一个非常简单的语句即可调用包含文件，此语句指示WEB服务器将内容插入适当网页。</p><h2 id="指令配置" tabindex="-1"><a class="header-anchor" href="#指令配置" aria-hidden="true">#</a> 指令配置</h2><p>SSI是被HTML文档内需要进行处理的包含部分的SSI Servlet调用的。这些指令是HTML文档的注释形式，这些指令在将内容发送到客户端之前进行内容的替换。</p><p>标准配置格式是：<code>&lt;!--#directive [parm=value] --&gt;</code>。</p><table><thead><tr><th>配置项</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>config</code></td><td><code>&lt;!--#config timefmt=&quot;%B %Y&quot; --&gt;</code></td><td>设置日期格式一起被SSI处理的其他数据</td></tr><tr><td><code>echo</code></td><td><code>&lt;!--#echo var=&quot;VARIABLE_NAEM&quot; --&gt;</code></td><td>将会被变量的值替换掉</td></tr><tr><td><code>exec</code></td><td>--</td><td>用来执行服务器端的命令</td></tr><tr><td><code>include</code></td><td><code>&lt;!--#include virtual=&quot;file-name&quot; --&gt;</code></td><td>包含的文件绝对路径</td></tr><tr><td><code>flastmod</code></td><td><code>&lt;!--#flastmod file=&quot;filename.html&quot; --&gt;</code></td><td>返回某个文件最后一次修改的时间</td></tr><tr><td><code>fsize</code></td><td><code>&lt;!--#fzie file=&quot;filename.html&quot; --&gt;</code></td><td>返回某个文件的大小</td></tr><tr><td><code>printenv</code></td><td><code>&lt;!--#printenv --&gt;</code></td><td>返回所有定义的变量</td></tr><tr><td><code>set</code></td><td><code>&lt;!--#set var=&quot;foo&quot; value=&quot;Bar&quot; --&gt;</code></td><td>用来为定义的变量赋值</td></tr></tbody></table><h3 id="nginx启用ssi" tabindex="-1"><a class="header-anchor" href="#nginx启用ssi" aria-hidden="true">#</a> Nginx启用SSI</h3>',12),o=(0,t.Uk)("官方文档地址： "),c={href:"http://nginx.org/en/docs/http/ngx_http_ssi_module.html",target:"_blank",rel:"noopener noreferrer"},d=(0,t.Uk)("Module ngx_http_ssi_module"),l=(0,t.uE)('<p>Nginx的SSI配置选项主要是以下三个：</p><ul><li><p><code>ssi</code> 默认值<code>off</code>，如果要启用SSI，将其设为<code>on</code></p></li><li><p><code>ssi_silent_errors</code> 默认值<code>off</code>，开启后在处理SSI文件出错时不输出错误提示<code>[an error occurred while processing the directive]</code>,实际测试并没有抑制错误。</p></li><li><p><code>ssi_types</code> 默认是<code>text/html</code>，所以如果需支持html，则不需要设置这句，如果需要支持<strong>shtml</strong>格式则需要设置：<code>ssi_types text/shtml</code></p></li></ul><p>参数的上下文环境是:<code>http</code>, <code>server</code>, <code>location</code>, <code>if in location</code>，下面是示例：</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>\n    <span class="token directive"><span class="token keyword">listen</span>  <span class="token number">80</span></span><span class="token punctuation">;</span>\n    <span class="token directive"><span class="token keyword">server_name</span>  192.168.1.10</span><span class="token punctuation">;</span>\n    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>\n        <span class="token directive"><span class="token keyword">ssi</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>\n        <span class="token directive"><span class="token keyword">ssi_silent_errors</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>\n        <span class="token directive"><span class="token keyword">ssi_types</span> text/html</span><span class="token punctuation">;</span>\n        <span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>\n        <span class="token directive"><span class="token keyword">root</span> /var/www/html</span><span class="token punctuation">;</span>\n        <span class="token directive"><span class="token keyword">expires</span> <span class="token number">30d</span></span><span class="token punctuation">;</span>\n        <span class="token directive"><span class="token keyword">access_log</span>      /var/log/nginx/localhost_access_log main</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="apache上启用ssi" tabindex="-1"><a class="header-anchor" href="#apache上启用ssi" aria-hidden="true">#</a> Apache上启用SSI</h3>',5),r=(0,t.Uk)("官方文档地址："),p={href:"https://httpd.apache.org/docs/current/howto/ssi.html",target:"_blank",rel:"noopener noreferrer"},i=(0,t.Uk)("Introduction to Server Side Includes"),u=(0,t.Wm)("p",null,[(0,t.Uk)("Apache的主配置文件"),(0,t.Wm)("code",null,"httpd.conf"),(0,t.Uk)("中配置需要支持SSI的后缀（html）")],-1),h=(0,t.Wm)("p",null,[(0,t.Uk)("去掉"),(0,t.Wm)("code",null,"AddType text/shtml，AddOutputFilter INCLUDES .shtml"),(0,t.Uk)("前面注释。")],-1),m=(0,t.Wm)("blockquote",null,[(0,t.Wm)("p",null,"注意一下包含文件的后缀。")],-1),k=(0,t.Wm)("h2",{id:"参考链接",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#参考链接","aria-hidden":"true"},"#"),(0,t.Uk)(" 参考链接")],-1),g={href:"http://www.publiccms.com/introduction/2015/08-25/177.html",target:"_blank",rel:"noopener noreferrer"},b=(0,t.Uk)("在nginx、apache、tomcat、iis中配置SSI"),S={render:function(e,n){const s=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.j4)(t.HY,null,[a,(0,t.Wm)("p",null,[o,(0,t.Wm)("a",c,[d,(0,t.Wm)(s)])]),l,(0,t.Wm)("p",null,[r,(0,t.Wm)("a",p,[i,(0,t.Wm)(s)])]),u,h,m,k,(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,[(0,t.Wm)("a",g,[b,(0,t.Wm)(s)])])])],64)}}}}]);