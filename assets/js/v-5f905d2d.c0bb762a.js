(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2340],{1376:(e,n,a)=>{"use strict";a.r(n),a.d(n,{data:()=>t});const t={key:"v-5f905d2d",path:"/tools/vagrant/vagrant-port-forwarding-and-file-sharing.html",title:"Vagrant端口转发和文件共享",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"典型的Vagrantfile配置",slug:"典型的vagrantfile配置",children:[]}],filePathRelative:"tools/vagrant/vagrant-port-forwarding-and-file-sharing.md",git:{updatedTime:1627991201e3,contributors:[]}}},7885:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>x});var t=a(6252);const s=(0,t.Wm)("h1",{id:"vagrant端口转发和文件共享",tabindex:"-1"},[(0,t.Wm)("a",{class:"header-anchor",href:"#vagrant端口转发和文件共享","aria-hidden":"true"},"#"),(0,t.Uk)(" Vagrant端口转发和文件共享")],-1),r=(0,t.Wm)("thead",null,[(0,t.Wm)("tr",null,[(0,t.Wm)("th",{style:{"text-align":"center"}},"操作"),(0,t.Wm)("th",{style:{"text-align":"left"}},"解释")])],-1),l={style:{"text-align":"center"}},o=(0,t.Uk)("端口转发（"),i={href:"https://www.vagrantup.com/docs/networking/forwarded_ports.html",title:"vagrant端口转发文档地址",target:"_blank",rel:"noopener noreferrer"},u=(0,t.Uk)("文档地址"),c=(0,t.Uk)("）"),p=(0,t.Wm)("td",{style:{"text-align":"left"}},"将本机具体端口转发到指定虚拟机端口",-1),d={style:{"text-align":"center"}},b=(0,t.Uk)("共享目录（"),m={href:"https://www.vagrantup.com/docs/synced-folders/",title:"vagrant官网共享目录文档地址",target:"_blank",rel:"noopener noreferrer"},g=(0,t.Uk)("文档地址"),v=(0,t.Uk)("）"),h=(0,t.Wm)("td",{style:{"text-align":"left"}},"将本机具体目录和虚拟机共享",-1),f=(0,t.Wm)("tr",null,[(0,t.Wm)("td",{style:{"text-align":"center"}},"网络配置"),(0,t.Wm)("td",{style:{"text-align":"left"}},"公有网络、私有网络和Host Only三种网络配置方式")],-1),q=(0,t.uE)('<h4 id="端口转发" tabindex="-1"><a class="header-anchor" href="#端口转发" aria-hidden="true">#</a> 端口转发</h4><p>将下面的代码段写入到vagrant的Vagrantfile配置文件中。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8888\nconfig.vm.network &quot;forwarded_port&quot;, guest: 8888, host: 8889\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>将虚拟机的 <code>80</code> 端口映射到本地机的 <code>8888</code> 端口以及虚拟机的 <code>8888</code> 端口映射到本地机的 <code>8889</code> 端口，使用<code>vagrant reload</code>重启虚拟机生效。 **注意：**这里所说的虚拟机为vagrant虚拟机，本地机为Mac开发机。</p></blockquote><p>我们来到 VirtualBox 中可以在虚拟机的 “设置” =&gt; &quot;网络&quot; =&gt; &quot;高级&quot; =&gt; &quot;端口转发&quot;</p>',5),w=(0,t.uE)('<h4 id="共享目录" tabindex="-1"><a class="header-anchor" href="#共享目录" aria-hidden="true">#</a> 共享目录</h4><p>将下面的代码段写入到vagrant的Vagrantfile配置文件中。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>config.vm.synced_folder &quot;/Users/curder/website&quot;, &quot;/var/www/html&quot;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>将本机<code>/Users/curder/website</code> 目录共享到虚拟机的<code>/var/www/html</code></p></blockquote><h4 id="网络配置" tabindex="-1"><a class="header-anchor" href="#网络配置" aria-hidden="true">#</a> 网络配置</h4><ul><li>配置私有网络IP</li></ul><p>将下面的代码段写入到vagrant的Vagrantfile配置文件中。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>config.vm.network &quot;private_network&quot;, ip: &quot;192.168.50.4&quot;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>配置共有网络IP</li></ul><p>将下面的代码段写入到vagrant的Vagrantfile配置文件中。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.100&quot;, auto_config: true\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>**注意：**公有网络IP配置需要和Mac本机的IP保持在一个网段，并且不能和其他主机ip冲突。</p></blockquote><h3 id="典型的vagrantfile配置" tabindex="-1"><a class="header-anchor" href="#典型的vagrantfile配置" aria-hidden="true">#</a> 典型的Vagrantfile配置</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(&quot;2&quot;) do |config|\nconfig.vm.box = &quot;ubuntu1404&quot;\nconfig.vm.hostname = &quot;developer&quot;\nconfig.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8888 ,id: &#39;nginx&#39;\nconfig.vm.network &quot;forwarded_port&quot;, guest: 8888, host: 8889 ,id: &#39;apache&#39;\nconfig.vm.network &quot;private_network&quot;, ip: &quot;192.168.199.101&quot;,auto_config: true\nconfig.vm.synced_folder &quot;/Users/curder/website/&quot;, &quot;/home/www&quot;, :nfs =&gt; true\n#config.vm.synced_folder &quot;/Users/curder/website/&quot;, &quot;/home/www&quot;, :nfs =&gt; true\n\nconfig.vm.provider &quot;virtualbox&quot; do |vb|\n# # Display the VirtualBox GUI when booting the machine\n# vb.gui = true\n#\n# # Customize the amount of memory on the VM:\nvb.memory = &quot;1024&quot;\nvb.cpus = 2\nvb.name = &quot;ubuntu_developer&quot;\nend\n\n\n# Enable provisioning with a shell script. Additional provisioners such as\n# Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the\n# documentation for more information about their specific syntax and use.\n# config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL\n# apt-get update\n# apt-get install -y apache2\n# SHELL\nend\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div>',14),x={render:function(e,n){const a=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.j4)(t.HY,null,[s,(0,t.Wm)("table",null,[r,(0,t.Wm)("tbody",null,[(0,t.Wm)("tr",null,[(0,t.Wm)("td",l,[o,(0,t.Wm)("a",i,[u,(0,t.Wm)(a)]),c]),p]),(0,t.Wm)("tr",null,[(0,t.Wm)("td",d,[b,(0,t.Wm)("a",m,[g,(0,t.Wm)(a)]),v]),h]),f])]),q,(0,t.Wm)("img",{src:e.$withBase("/images/tools/vagrant/forwarded_ports.png"),alt:""},null,8,["src"]),w],64)}}}}]);