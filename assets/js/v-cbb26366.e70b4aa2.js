(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1944],{9877:(n,s,e)=>{"use strict";e.r(s),e.d(s,{data:()=>a});const a={key:"v-cbb26366",path:"/tools/vagrant/mac-installation-using-vagrant-and-lanmp-environment-to-build.html",title:"LANMP环境搭建",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"进入到vagrant虚拟机",slug:"进入到vagrant虚拟机",children:[]},{level:3,title:"更新Ubuntu系统的源",slug:"更新ubuntu系统的源",children:[]},{level:3,title:"Nginx安装",slug:"nginx安装",children:[]},{level:3,title:"Apache安装",slug:"apache安装",children:[]},{level:3,title:"MySQL 安装",slug:"mysql-安装",children:[]},{level:3,title:"PHP安装",slug:"php安装",children:[]}],filePathRelative:"tools/vagrant/mac-installation-using-vagrant-and-lanmp-environment-to-build.md",git:{updatedTime:1639719222e3,contributors:[]}}},8479:(n,s,e)=>{"use strict";e.r(s),e.d(s,{default:()=>t});const a=(0,e(6252).uE)('<h1 id="lanmp环境搭建" tabindex="-1"><a class="header-anchor" href="#lanmp环境搭建" aria-hidden="true">#</a> LANMP环境搭建</h1><p>LANMP 环境包含如下服务器软件。</p><table><thead><tr><th style="text-align:center;">缩写</th><th style="text-align:left;">解释</th><th>版本</th></tr></thead><tbody><tr><td style="text-align:center;">L</td><td style="text-align:left;">Linux，这里以Ubuntu12.04系统为例</td><td>12.04</td></tr><tr><td style="text-align:center;">A</td><td style="text-align:left;">Apache WebServer</td><td>2.4.7</td></tr><tr><td style="text-align:center;">N</td><td style="text-align:left;">Nginx WebServer</td><td>1.4.6</td></tr><tr><td style="text-align:center;">M</td><td style="text-align:left;">MySQL Database Server</td><td>5.5.57</td></tr><tr><td style="text-align:center;">P</td><td style="text-align:left;">PHP or php-fpm</td><td>5.5.9</td></tr></tbody></table><h3 id="进入到vagrant虚拟机" tabindex="-1"><a class="header-anchor" href="#进入到vagrant虚拟机" aria-hidden="true">#</a> 进入到vagrant虚拟机</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vagrant shh\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="更新ubuntu系统的源" tabindex="-1"><a class="header-anchor" href="#更新ubuntu系统的源" aria-hidden="true">#</a> 更新Ubuntu系统的源</h3><p>执行下面的命令对原始源进行备份</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>将下面的内容替换<code>/etc/apt/sources.list</code> 文件的源内容。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>执行完上面的操作后，再执行下面的命令对源进行更新。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>将默认国外的源改成aliyun的源</p></blockquote><h3 id="nginx安装" tabindex="-1"><a class="header-anchor" href="#nginx安装" aria-hidden="true">#</a> Nginx安装</h3><p>使用<code>apt-get</code>命令对nginx服务器进行安装。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nginx\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查看安装效果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>nginx -v\n<span class="token function">curl</span> -I <span class="token string">&#39;http://127.0.0.1&#39;</span>\n<span class="token function">wget</span> <span class="token string">&#39;http://127.0.0.1&#39;</span>\ntelnet <span class="token number">127.0</span>.0.1 <span class="token number">80</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="apache安装" tabindex="-1"><a class="header-anchor" href="#apache安装" aria-hidden="true">#</a> Apache安装</h3><p>使用<code>apt-get</code>命令对apache服务器进行安装。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> apache2\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查看安装效果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>apache2 -v\n<span class="token function">curl</span> -I <span class="token string">&#39;http://127.0.0.1&#39;</span>\n<span class="token function">wget</span> <span class="token string">&#39;http://127.0.0.1&#39;</span>\ntelnet <span class="token number">127.0</span>.0.1 <span class="token number">80</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>此时我们执行测试时，肯定会抛出错误。因为nginx和apache这两款webserver的默认端口都是80端口。</p></blockquote><ul><li>停掉另一个服务器</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> /etc/init.d/nginx stop\n<span class="token function">sudo</span> /etc/init.d/apache2 stop\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>修改web服务器端口</li></ul><p>例如修改apache2的端口，配置文件在<code>/etc/apache2/ports.conf</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/apache2/ports.conf\n\nListen <span class="token number">8888</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>将apache的监听端口设置成8888。</p><h3 id="mysql-安装" tabindex="-1"><a class="header-anchor" href="#mysql-安装" aria-hidden="true">#</a> MySQL 安装</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> mysql-server mysql-client\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>上述命令分别安装了MySQL的服务端和MySQL的客户端。</p><blockquote><p>安装期间会提示输入为MySQL设置root密码，如果是本地开发环境，可以直接 enter 不设置密码。</p></blockquote><p>查看安装效果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysql -uroot -p\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>进入MySQL的交互界面。</p><h3 id="php安装" tabindex="-1"><a class="header-anchor" href="#php安装" aria-hidden="true">#</a> PHP安装</h3><p>使用下面的命令安装php5.5.9和一些常用的php拓展。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> php5-cli php5-mcrypt php5-mysql php5-gd\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="apache2相关设置" tabindex="-1"><a class="header-anchor" href="#apache2相关设置" aria-hidden="true">#</a> Apache2相关设置</h4><ul><li>支持apache2的php模块</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libapache2-mod-php5\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>开启rewrite功能</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> a2enmod rewrite\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="nginx相关设置" tabindex="-1"><a class="header-anchor" href="#nginx相关设置" aria-hidden="true">#</a> Nginx相关设置</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> php5-cgi php5-fpm\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>安装php-fpm，让nginx支持fastcgi。</p><p>修改成9000端口 ，默认sock模式</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /etc/php5/fpm/pool.d\n<span class="token function">sudo</span> <span class="token function">vim</span> www.conf <span class="token comment"># search listen = 127.0.0.1:9000</span>\n<span class="token function">sudo</span> /etc/init.d/php5-fpm restart\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',50),t={render:function(n,s){return a}}}}]);