import{_ as s,M as e,p as t,q as o,R as n,t as l,N as p,a1 as c}from"./framework-fb0bc66b.js";const r={},i=c(`<h1 id="laravel-使用mysql按json-字段值排序" tabindex="-1"><a class="header-anchor" href="#laravel-使用mysql按json-字段值排序" aria-hidden="true">#</a> Laravel 使用MySQL按JSON 字段值排序</h1><p>在 Laravel 开发中使用<code>json</code> 类型字段存储多个值，很快就遇到了如何使用 JSON 属性字段对数据进行排序的问题。</p><p>由于 JSON 属性中的数据被转换为字符串数据，因此在 eloquent orderBy 方法中执行 <code>json_field-&gt;property</code> 的常用方法没有给出正确的结果。</p><p>我们可以使用它来排序我们的结果之前，必须将字段属性转换为适当的数据类型，就我而言，我想将其转换为无符号整数。</p><p>Eloquent 模型上的 <code>$casts</code> 属性不适用于 JSON 属性，当前找到的唯一方法是使用 <code>orderByRaw</code>。</p><ul><li>数据排序</li></ul><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">orderByRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;CAST(extra-&gt;&quot;$.porpular_order_number&quot; AS unsigned) ASC&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>数据查询</li></ul><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereJsonContains</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;extra-&gt;is_porpular&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="参考地址" tabindex="-1"><a class="header-anchor" href="#参考地址" aria-hidden="true">#</a> 参考地址</h2>`,10),u={href:"https://5balloons.info/sort-by-mysql-json-field-value-in-laravel/",target:"_blank",rel:"noopener noreferrer"};function d(k,h){const a=e("ExternalLinkIcon");return t(),o("div",null,[i,n("ul",null,[n("li",null,[n("a",u,[l("Sort by Mysql JSON Field Value in Laravel"),p(a)])])])])}const m=s(r,[["render",d],["__file","sort-by-mysql-json-field-value-in-laravel.html.vue"]]);export{m as default};
