import{_ as l,M as o,p as i,q as r,R as n,t as s,N as e,V as u,a1 as p}from"./framework-ff09ffed.js";const d={},k=n("h1",{id:"定义资源",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#定义资源","aria-hidden":"true"},"#"),s(" 定义资源")],-1),v=p(`<p>下面通过简单的文章增删改查来展示 nova 的高效开发后台。</p><h2 id="建立模型和数据文件" tabindex="-1"><a class="header-anchor" href="#建立模型和数据文件" aria-hidden="true">#</a> 建立模型和数据文件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan make:model Post <span class="token parameter variable">-m</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行完上面的命令会建立两个文件，分别是<code>app/Post.php</code>和<code>database/migrations/2019_03_07_091258_create_posts_table.php</code>文件。</p><p>修改<code>2019_03_07_091258_create_posts_table.php</code>数据库迁移文件的内容：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token doc-comment comment">/**
 * Run the migrations.
 *
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token keyword">void</span></span>
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">bigIncrements</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;body&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改完迁移文件后，使用命令将迁移文件应用到数据库</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan migrate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="建立-nova-资源文件" tabindex="-1"><a class="header-anchor" href="#建立-nova-资源文件" aria-hidden="true">#</a> 建立 nova 资源文件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan nova:resource Post
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,10),m=["src"],g=["src"],h=p(`<p>可以看到，新增页面没有任何的表字段可以添加。</p><p>命令运行完命令后会添加<code>app/Nova/Post.php</code>，可以通过修改其中的<code>fields</code>方法返回值：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\\</span>Nova<span class="token punctuation">\\</span>Fields<span class="token punctuation">\\</span>Text</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\\</span>Nova<span class="token punctuation">\\</span>Fields<span class="token punctuation">\\</span>Markdown</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">fields</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token class-name static-context">ID</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">sortable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name static-context">Text</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Title&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">rules</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;required&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">sortable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name static-context">Markdown</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Body&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">rules</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;required&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再次查看新增页面可以看到如下的输出。</p>`,4),b=["src"],_=n("p",null,"至此，一个简单的 Posts 管理界面开发完毕，后面再对这些 CURD 界面进行一些定制化开发。",-1),f=n("h2",{id:"参考链接",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#参考链接","aria-hidden":"true"},"#"),s(" 参考链接")],-1),w={href:"https://nova.laravel.com/docs/2.0/resources/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://leijingwei.com/archives/31",target:"_blank",rel:"noopener noreferrer"};function y(a,q){const c=o("RouterLink"),t=o("ExternalLinkIcon");return i(),r("div",null,[k,n("p",null,[s("通过"),e(c,{to:"/languages/laravel/nova/01-how-to-installation-laravel-nove.html"},{default:u(()=>[s("安装 laravel nova")]),_:1}),s("已经了解了 nova 的安装。")]),v,n("img",{src:a.$withBase("/images/languages/laravel/nova/how-to-defining-resources-use-laravel-nova/laravel-nova-post-resource-init-index.png"),alt:""},null,8,m),n("img",{src:a.$withBase("/images/languages/laravel/nova/how-to-defining-resources-use-laravel-nova/laravel-nova-post-resource-init-create.png"),alt:""},null,8,g),h,n("img",{src:a.$withBase("/images/languages/laravel/nova/how-to-defining-resources-use-laravel-nova/laravel-nova-post-resource-add-fields-for-create.png"),alt:""},null,8,b),_,f,n("ul",null,[n("li",null,[n("a",w,[s("Laravel Nova Resources Document"),e(t)])]),n("li",null,[n("a",x,[s("Laravel Nova 入门创建一个简单的博客(一)"),e(t)])])])])}const L=l(d,[["render",y],["__file","02-how-to-defining-resources-use-laravel-nova.html.vue"]]);export{L as default};
