<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>CentOS7使用yum方式安装和配置php-fpm | 编程学习</title><meta name="description" content="编程学习点滴"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.21">
    <link rel="preload" href="/blog/assets/js/runtime~app.4e30a252.js" as="script"><link rel="preload" href="/blog/assets/css/styles.2a4a4cc9.css" as="style"><link rel="preload" href="/blog/assets/js/4640.6f8b0fb7.js" as="script"><link rel="preload" href="/blog/assets/js/app.37fc4b74.js" as="script">
    <link rel="stylesheet" href="/blog/assets/css/styles.2a4a4cc9.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/blog/" class=""><!----><span class="site-name">编程学习</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/blog/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="编程相关"><span class="title">编程相关</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="编程相关"><span class="title">编程相关</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/languages/laravel/" class="nav-link" aria-label="Laravel"><!--[--><!--]--> Laravel <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/wordpress/" class="nav-link" aria-label="WordPress"><!--[--><!--]--> WordPress <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/go/" class="nav-link" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/javascript/" class="nav-link" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/vue/" class="nav-link" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="操作系统"><span class="title">操作系统</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="操作系统"><span class="title">操作系统</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/os/centos/" class="nav-link router-link-active" aria-label="CentOS"><!--[--><!--]--> CentOS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/os/ubuntu/" class="nav-link" aria-label="Ubuntu"><!--[--><!--]--> Ubuntu <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/os/mac-os/" class="nav-link" aria-label="Mac OS"><!--[--><!--]--> Mac OS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/tools/sublime/" class="nav-link" aria-label="Sublime Text"><!--[--><!--]--> Sublime Text <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/phpstorm/" class="nav-link" aria-label="PHPStorm"><!--[--><!--]--> PHPStorm <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/valet/" class="nav-link" aria-label="Valet"><!--[--><!--]--> Valet <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/vagrant/" class="nav-link" aria-label="Vagrant"><!--[--><!--]--> Vagrant <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/google-developer-tools/" class="nav-link" aria-label="Google Developer Tools"><!--[--><!--]--> Google Developer Tools <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/others/" class="nav-link" aria-label="Others"><!--[--><!--]--> Others <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/blog/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="编程相关"><span class="title">编程相关</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="编程相关"><span class="title">编程相关</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/languages/laravel/" class="nav-link" aria-label="Laravel"><!--[--><!--]--> Laravel <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/wordpress/" class="nav-link" aria-label="WordPress"><!--[--><!--]--> WordPress <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/go/" class="nav-link" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/javascript/" class="nav-link" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/languages/vue/" class="nav-link" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="操作系统"><span class="title">操作系统</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="操作系统"><span class="title">操作系统</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/os/centos/" class="nav-link router-link-active" aria-label="CentOS"><!--[--><!--]--> CentOS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/os/ubuntu/" class="nav-link" aria-label="Ubuntu"><!--[--><!--]--> Ubuntu <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/os/mac-os/" class="nav-link" aria-label="Mac OS"><!--[--><!--]--> Mac OS <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/tools/sublime/" class="nav-link" aria-label="Sublime Text"><!--[--><!--]--> Sublime Text <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/phpstorm/" class="nav-link" aria-label="PHPStorm"><!--[--><!--]--> PHPStorm <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/valet/" class="nav-link" aria-label="Valet"><!--[--><!--]--> Valet <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/vagrant/" class="nav-link" aria-label="Vagrant"><!--[--><!--]--> Vagrant <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tools/google-developer-tools/" class="nav-link" aria-label="Google Developer Tools"><!--[--><!--]--> Google Developer Tools <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/others/" class="nav-link" aria-label="Others"><!--[--><!--]--> Others <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">CentOS</p><ul class=""><li><!--[--><a href="/blog/os/centos/automatically-deploy-laravel-applications-deployer-centos.html" class="nav-link sidebar-item" aria-label="如何在CentOS上使用Deployer自动部署Laravel应用程序"><!--[--><!--]--> 如何在CentOS上使用Deployer自动部署Laravel应用程序 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/centos-uses-scheduled-tasks-to-perform-tasks-every-seconds.html" class="nav-link sidebar-item" aria-label="Linux下使用定时任务每隔N秒钟执行任务"><!--[--><!--]--> Linux下使用定时任务每隔N秒钟执行任务 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/how-to-create-a-sudo-user-on-centos.html" class="nav-link sidebar-item" aria-label="如何在CentOS上创建sudo用户"><!--[--><!--]--> 如何在CentOS上创建sudo用户 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/how-to-install-and-configure-gitlab-ce-on-centos-7.html" class="nav-link sidebar-item" aria-label="如何在CentOS 7上安装和配置GitLab CE"><!--[--><!--]--> 如何在CentOS 7上安装和配置GitLab CE <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/how-to-use-firewall-package-in-centos7.html" class="nav-link sidebar-item" aria-label="CentOS7中firewalld防火墙的使用"><!--[--><!--]--> CentOS7中firewalld防火墙的使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/how-to-use-supervisord-manager-processes.html" class="nav-link sidebar-item" aria-label="使用supervisord管理进程"><!--[--><!--]--> 使用supervisord管理进程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/installing-configuration-shadowsocks-under-centos-7.html" class="nav-link sidebar-item" aria-label="CentOS7下安装配置 shadowsocks"><!--[--><!--]--> CentOS7下安装配置 shadowsocks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/prevent-remote-linux-hosts-from-automatically-desconnecting-ssh-connections.html" class="nav-link sidebar-item" aria-label="防止远程Linux主机自动断开SSH连接"><!--[--><!--]--> 防止远程Linux主机自动断开SSH连接 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">CentOS7</p><ul class=""><li><!--[--><a href="/blog/os/centos/centos7/centos-7-install-php-extension-swoole.html" class="nav-link sidebar-item" aria-label="CentOS 下安装 PHP 拓展 Swoole"><!--[--><!--]--> CentOS 下安装 PHP 拓展 Swoole <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/centos7/centos-7-lnmp-installation-and-configuration.html" class="nav-link sidebar-item" aria-label="CentOS 7 LNMP 安装和配置"><!--[--><!--]--> CentOS 7 LNMP 安装和配置 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/centos7/centos-7-server-initialization.html" class="nav-link sidebar-item" aria-label="Centos 7 服务器初始化"><!--[--><!--]--> Centos 7 服务器初始化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-mysql.html" class="nav-link sidebar-item" aria-label="CentOS7使用yum方式安装和配置MySQL"><!--[--><!--]--> CentOS7使用yum方式安装和配置MySQL <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-nginx.html" class="nav-link sidebar-item" aria-label="CentOS7使用yum方式安装和配置Nginx"><!--[--><!--]--> CentOS7使用yum方式安装和配置Nginx <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="CentOS7使用yum方式安装和配置php-fpm"><!--[--><!--]--> CentOS7使用yum方式安装和配置php-fpm <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#使用webtatic仓库安装php" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用webtatic仓库安装PHP"><!--[--><!--]--> 使用webtatic仓库安装PHP <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#安装webstatic仓库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="安装webstatic仓库"><!--[--><!--]--> 安装webstatic仓库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#检查webstatic仓库安装结果" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="检查webstatic仓库安装结果"><!--[--><!--]--> 检查webstatic仓库安装结果 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#使用yum命令安装php-fpm" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用yum命令安装php-fpm"><!--[--><!--]--> 使用yum命令安装php-fpm <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#检查php-fpm是否安装成功" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="检查php-fpm是否安装成功"><!--[--><!--]--> 检查php-fpm是否安装成功 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#使用remi仓库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用remi仓库"><!--[--><!--]--> 使用remi仓库 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#配置php-fpm" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="配置php-fpm"><!--[--><!--]--> 配置php-fpm <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#修改-php-ini" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="修改 php.ini"><!--[--><!--]--> 修改 php.ini <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#修改www-conf" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="修改www.conf"><!--[--><!--]--> 修改www.conf <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#系统守护进程方式启动php-fpm" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="系统守护进程方式启动php-fpm"><!--[--><!--]--> 系统守护进程方式启动php-fpm <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#使用supervisord管理进程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用supervisord管理进程"><!--[--><!--]--> 使用supervisord管理进程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#检查php-fpm" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="检查php-fpm"><!--[--><!--]--> 检查php-fpm <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm.html#参考链接" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="参考链接"><!--[--><!--]--> 参考链接 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="centos7使用yum方式安装和配置php-fpm" tabindex="-1"><a class="header-anchor" href="#centos7使用yum方式安装和配置php-fpm" aria-hidden="true">#</a> CentOS7使用yum方式安装和配置php-fpm</h1><p>目前常用的两种yum方式安装php-fpm，分别是<code>webtatic</code>仓库和<code>remi</code>仓库，在实际的使用中选择一种即可。</p><p>下面以安装 PHP 7.1 为例。</p><h2 id="使用webtatic仓库安装php" tabindex="-1"><a class="header-anchor" href="#使用webtatic仓库安装php" aria-hidden="true">#</a> 使用webtatic仓库安装PHP</h2><h3 id="安装webstatic仓库" tabindex="-1"><a class="header-anchor" href="#安装webstatic仓库" aria-hidden="true">#</a> 安装webstatic仓库</h3><p>在CentOS基础库中不存在PHP 7.1，我们需要从名为<code>webtatic</code>的第三方仓库中安装它。</p><p>使用如下rpm命令安装<code>webtatic</code>仓库。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> -y epel-release
<span class="token function">sudo</span> <span class="token function">rpm</span> -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>如果执行上面的命令一直报错<code>curl: (35) Encountered end of file</code>，可以尝试将上面的https协议改成http协议获取rpm源。</p></blockquote><p>其他版本下载可以查看这里：<a href="https://webtatic.com/projects/yum-repository/" target="_blank" rel="noopener noreferrer">webtatic仓库<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h3 id="检查webstatic仓库安装结果" tabindex="-1"><a class="header-anchor" href="#检查webstatic仓库安装结果" aria-hidden="true">#</a> 检查webstatic仓库安装结果</h3><p>使用下面的命令可以查看<code>webstatic</code>仓库是否安装成功。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum repolist
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><img src="/blog/images/os/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm/webtatic-rpm.png" alt=""><h3 id="使用yum命令安装php-fpm" tabindex="-1"><a class="header-anchor" href="#使用yum命令安装php-fpm" aria-hidden="true">#</a> 使用yum命令安装php-fpm</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y php71w php71w-gd php71w-curl php71w-common php71w-cli php71w-mysql php71w-mbstring php71w-fpm php71w-xml php71w-pdo php71w-zip
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行完上面的命令后，CentOS系统上已经安装了PHP 7.1。</p><h3 id="检查php-fpm是否安装成功" tabindex="-1"><a class="header-anchor" href="#检查php-fpm是否安装成功" aria-hidden="true">#</a> 检查php-fpm是否安装成功</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>php -v
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><img src="/blog/images/os/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm/check-php-fpm-install-by-webtatic-success.png" alt=""><blockquote><p><strong>注意：</strong> 如果想更换到<code>php5.6</code>或<code>7.0</code>版本, 直接把上面的<code>php71w</code>换成<code>php56w</code>或者<code>php70w</code>就可以了。 重装<code>php-fp</code>m时，记得使用<code>sudo systemctl stop php-fpm</code>先关闭<code>php-fpm</code>进程，然后再使用 <code>yum uninstall php71w php71w-curl php71w-common php71w-cli php71w-mysql php71w-mbstring php71w-fpm php71w-xml php71w-pdo php71w-zip</code> 命令进行移除后，并再次执行<code>yum install</code>命令进行重装。</p></blockquote><h3 id="使用remi仓库" tabindex="-1"><a class="header-anchor" href="#使用remi仓库" aria-hidden="true">#</a> 使用remi仓库</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">wget</span> https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
<span class="token function">sudo</span> <span class="token function">wget</span> http://rpms.remirepo.net/enterprise/remi-release-7.rpm
<span class="token function">sudo</span> <span class="token function">rpm</span> -Uvh remi-release-7.rpm epel-release-latest-7.noarch.rpm

<span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils
<span class="token function">sudo</span> yum-config-manager --enable remi-php71

<span class="token function">sudo</span> yum <span class="token function">install</span> -y php71

<span class="token function">sudo</span> yum <span class="token function">install</span> -y php php-mcrypt php-xml php-mbstring php-cli php-gd php-curl php-mysql php-ldap php-zip php-fileinf php-fpm
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>如果执行上面的命令提示：<code>-bash: wget: command not found</code>，则使用<code>sudo yum install -y wget</code>安装一下<code>wget</code>命令。</p></blockquote><h2 id="配置php-fpm" tabindex="-1"><a class="header-anchor" href="#配置php-fpm" aria-hidden="true">#</a> 配置php-fpm</h2><p><strong>注意:</strong> 在配置中修改的用户和用户组会设置成跟web服务器的保持一致即可。</p><p>如果不存在web服务器，可以使用<code>nobody</code>替代。</p><h3 id="修改-php-ini" tabindex="-1"><a class="header-anchor" href="#修改-php-ini" aria-hidden="true">#</a> 修改 php.ini</h3><p>通过使用<code>vim</code>编辑配置文件<code>php.ini</code>来配置PHP，默认的主配置文件存放位置在<code>/etc/php.ini</code>。</p><p>在文件中找如如下行，取消它的行注释并将值更改为<strong>0</strong>。</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">cgi.fix_pathinfo</span><span class="token punctuation">=</span><span class="token value attr-value">0</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>修改完成后，保存文件并退出编辑器。</p><h3 id="修改www-conf" tabindex="-1"><a class="header-anchor" href="#修改www-conf" aria-hidden="true">#</a> 修改www.conf</h3><p>现在编辑<code>php-fpm</code>文件<code>/etc/php-fpm.d/www.conf</code>。</p><ul><li><code>php-fpm</code>将在用户和组<code>nginx</code>下运行，将下面两行的值更改为<code>nginx</code>，这里用户和用户组请保持与<code>Nginx</code>服务器的用户和用户组一致。</li></ul><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">user</span> <span class="token punctuation">=</span> <span class="token value attr-value">nginx</span>
<span class="token key attr-name">group</span> <span class="token punctuation">=</span> <span class="token value attr-value">nginx</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>php-fpm</code>将在套接字文件下运行，而不是使用服务器端口，将<code>listen</code>值更改为路径<code>/run/php-fpm/php-fpm.sock</code>。</li></ul><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">listen</span> <span class="token punctuation">=</span> <span class="token value attr-value">/run/php-fpm/php-fpm.sock</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>套接字文件所有者将是<code>nginx</code>用户，这里用户和用户组请保持与<code>Nginx</code>服务器的用户和用户组一致。权限模式为<code>660</code>，取消注释并更改所有值。</li></ul><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">listen.owner</span> <span class="token punctuation">=</span> <span class="token value attr-value">nginx</span>
<span class="token key attr-name">listen.group</span> <span class="token punctuation">=</span> <span class="token value attr-value">nginx</span>
<span class="token key attr-name">listen.mode</span>  <span class="token punctuation">=</span> <span class="token value attr-value">0660</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>对于环境变量，取消注释这些行并设置值。</li></ul><div class="language-dotenv ext-dotenv line-numbers-mode"><pre class="language-dotenv"><code>env[HOSTNAME] = $HOSTNAME
env[PATH] = /usr/local/bin:/usr/bin:/bin
env[TMP] = /tmp
env[TMPDIR] = /tmp
env[TEMP] = /tmp
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="系统守护进程方式启动php-fpm" tabindex="-1"><a class="header-anchor" href="#系统守护进程方式启动php-fpm" aria-hidden="true">#</a> 系统守护进程方式启动php-fpm</h3><p>执行下面的命令启动<code>php-fpm</code>并使其在CentOS系统启动时运行。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start php-fpm <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> php-fpm
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="使用supervisord管理进程" tabindex="-1"><a class="header-anchor" href="#使用supervisord管理进程" aria-hidden="true">#</a> 使用supervisord管理进程</h3><p>supervisord的进程管理<a href="/os/centos/how-to-use-supervisord-manager-processes.md" target="_blank" rel="noopener noreferrer">参考这里<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>。</p><h4 id="修改php-fpm在前台运行" tabindex="-1"><a class="header-anchor" href="#修改php-fpm在前台运行" aria-hidden="true">#</a> 修改php-fpm在前台运行</h4><ul><li>使用<code>sed</code>命令进行修改</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sed</span> -i <span class="token string">&#39;s/^daemonize = yes/daemonize = no/g&#39;</span> /etc/php-fpm.conf
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>检查php-fpm配置</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">grep</span> daemonize /etc/php-fpm.conf
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>输出：<code>daemonize = no</code>即表示设置成功。</p><h4 id="php-fpm的supervisord配置文件" tabindex="-1"><a class="header-anchor" href="#php-fpm的supervisord配置文件" aria-hidden="true">#</a> php-fpm的supervisord配置文件</h4><p>默认的 supervisord 的进程文件保存在<code>/etc/supervisord.d/php.ini</code>，内容如下：</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">program:php</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">command</span><span class="token punctuation">=</span><span class="token value attr-value">/sbin/php-fpm</span>
<span class="token key attr-name">user</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">autostart</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">autorestart</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">stdout_logfile</span><span class="token punctuation">=</span><span class="token value attr-value">/var/log/php.out.log</span>
<span class="token key attr-name">stderr_logfile</span><span class="token punctuation">=</span><span class="token value attr-value">/var/log/php.err.log</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="重载配置" tabindex="-1"><a class="header-anchor" href="#重载配置" aria-hidden="true">#</a> 重载配置</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>supervisorctl reread <span class="token operator">&amp;&amp;</span> supervisorctl update
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行完上面的命令，可以看到控制台会输出如下结果</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>php: available
php: added process group
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>如果在启动<code>php-fpm</code>的时候，报错<code>ERROR: unable to bind listening socket for address &#39;/run/php-fpm/php-fpm.sock&#39;: No such file or directory (2)</code>。 使用命令<code>mkdir -pv /run/php-fpm/</code>手动创建目录。</p></blockquote><p>至此使用 <code>supervisord</code> 管理<code>php-fpm</code>进程已经完成。</p><h3 id="检查php-fpm" tabindex="-1"><a class="header-anchor" href="#检查php-fpm" aria-hidden="true">#</a> 检查php-fpm</h3><h4 id="检查进程" tabindex="-1"><a class="header-anchor" href="#检查进程" aria-hidden="true">#</a> 检查进程</h4><p>检查系统进程使用<code>ps</code>命令。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> aux <span class="token operator">|</span><span class="token function">grep</span> php-fpm
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><img src="/blog/images/os/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm/php-fpm-process-check.png" alt=""><h4 id="检查套接字" tabindex="-1"><a class="header-anchor" href="#检查套接字" aria-hidden="true">#</a> 检查套接字</h4><p>php-fpm在套接字文件下运行，使用以下命令检查。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">netstat</span> -pl <span class="token operator">|</span> <span class="token function">grep</span> php-fpm.sock
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>如果得到<code>“-bash: netstat: command not found”</code>错误，请安装<code>net-tools</code>软件包，如下所示： <code>sudo yum -y install net-tools</code></p></blockquote><img src="/blog/images/os/centos7/centos-7-uses-yum-way-to-install-and-configure-php-fpm/php-fpm-sock-status-check.png" alt=""><p>至此，CentOS下安装<code>php-fpm</code>就安装好了。</p><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接" aria-hidden="true">#</a> 参考链接</h2><ul><li><p><a href="https://linuxize.com/post/install-php-7-on-centos-7/" target="_blank" rel="noopener noreferrer">Install PHP 7 on CentOS 7<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p></li><li><p><a href="https://www.cyberciti.biz/faq/how-to-install-php-7-2-on-centos-7-rhel-7/" target="_blank" rel="noopener noreferrer">How to install PHP 7.2 on CentOS 7/RHEL 7<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p></li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">12/8/2021, 8:13:15 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/blog/os/centos/centos7/centos-7-uses-yum-way-to-install-and-configure-nginx.html" class="nav-link" aria-label="CentOS7使用yum方式安装和配置Nginx"><!--[--><!--]--> CentOS7使用yum方式安装和配置Nginx <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/blog/assets/js/runtime~app.4e30a252.js" defer></script><script src="/blog/assets/js/4640.6f8b0fb7.js" defer></script><script src="/blog/assets/js/app.37fc4b74.js" defer></script>
  </body>
</html>
